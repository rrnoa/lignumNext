.article--tool {
  @include flex;
  @include column;
  @include between;
  margin-top: x4($space);
  min-height: calc(100vh - #{x4($space)});

  &__header {
    margin-bottom: d1-2($space);
  }

  &__upload {
    @include flex;
    @include column;
    @include center;
    flex: 1;

    p {
      margin-top: d1-2($space);
      font-style: italic;
      color: v(gray1);
    }
  }

  &__body {
    flex: 1;
  }

  &__box {
    margin-bottom: d3($space);
    position: relative;
    width: 100%;
    height: 100%;
    border-radius: d6($space);
    aspect-ratio: 2 / 3;

    .buttons-box {
      @include flex;
      @include column;
      width: x1-2($space);
      max-width: x1-2($space);
      position: absolute;
      top: $space;
      right: -#{d3($space)};
      z-index: 10;

      .button + .button {
        margin-top: d1-2($space);
      }
    }
  }

  &__canvas {
    position: relative;

    .preview-info {
      @include flex;
      @include middle;
      @include between;
      margin-bottom: d2($space);
    }

    canvas {
      width: 100% !important;
      height: 100% !important;
      aspect-ratio: 1 / 1;
      border-radius: d6($space);
    }
  }

  .preview--xs {
    @include flex;
    @include between;
  }

  .preview--md {
    display: none;
    position: relative;
    margin-bottom: d1-2($space);
    background-color: v(gray2);
    border-radius: d6($space);
    text-align: center;

    .controls {
      position: absolute;
      top: d1-2($space);
      right: d1-2($space);
    }
  }

  .box__input {
    @include flex;

    .input {
      @include flex;
    }

    .input + .input {
      margin-left: d1-2($space);
    }

    label {
      margin-right: d3($space);
      font-weight: $semibold;
      @include fontsize(s1);
    }

    input {
      height: 40px;
      width: 100%;
      max-width: 90px;
      text-align: center;
      background-color: v(gray3);
      border: 2px solid v(black);
      border-radius: d4($space);
    }
  }

  .prepare-preview {
    @include flex;
    @include center;
    @include middle;
    position: relative;
    margin-top: $space;
    margin-bottom: $space;
    min-height: 360px;
    max-height: 360px;
    text-align: center;
    overflow: hidden;
    background-color: v(gray3);
    border-radius: d6($space);

    img {
      max-height: 360px;
    }
  }

  .block-size .block-size__content {
    @include flex;

    input[type="radio"] {
      display: inline-block;
      position: absolute;
      overflow: hidden;
      clip: rect(0 0 0 0);
      height: 1;
      width: 1;
      margin: -1;
      padding: 0;
      border: 0;
    }

    .number {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: d3($space);
      width: x2($space);
      min-width: x2($space);
      height: x2($space);
      color: v(gray1);
      background-color: v(gray2);
      font-weight: $bold;
      overflow: hidden;
      border: 2px solid v(black);
      border-radius: d3($space);
    }

    .number:hover {
      cursor: pointer;
      color: v(white);
      background-color: v(gray1);
    }

    input:checked ~ .number {
      color: v(white);
      background-color: v(black);
    }

    label + label {
      margin-left: d3($space);
    }
  }

  .price .price__content {
    @include flex;
    @include end;
    line-height: 0.7;
  }
}

.upload--md {
  display: none;
  position: relative;
  height: 265px;
  padding: $space;
  text-align: center;
  background-color: v(gray2);
  background-image: repeating-linear-gradient(
      0deg,
      #252525,
      #252525 16px,
      transparent 16px,
      transparent 30px,
      #252525 30px
    ),
    repeating-linear-gradient(
      90deg,
      #252525,
      #252525 16px,
      transparent 16px,
      transparent 30px,
      #252525 30px
    ),
    repeating-linear-gradient(
      180deg,
      #252525,
      #252525 16px,
      transparent 16px,
      transparent 30px,
      #252525 30px
    ),
    repeating-linear-gradient(
      270deg,
      #252525,
      #252525 16px,
      transparent 16px,
      transparent 30px,
      #252525 30px
    );
  background-size: 2px 100%, 100% 2px, 2px 100%, 100% 2px;
  background-position: 0 0, 0 0, 100% 0, 0 100%;
  background-repeat: no-repeat;
  border-radius: d6($space);
  outline: none;
  resize: none;

  input {
    opacity: 0;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
  }

  &__button {
    @include inline-flex;
    @include center;
    min-width: 320px;
    padding: 0 d1-2($space);
    height: 62px;
    line-height: 62px;
    font-weight: $bold;
    color: v(white);
    background-color: v(black);
    border-radius: d6($space);
    text-decoration: none;
    transition: all 0.25s;
  }

  &__text {
    margin-top: x1-2($space);
    color: v(black);
  }
}

.footer--upload {
  position: absolute;
  right: 0;
  bottom: 0;
  left: 0;
  padding: d1-2($space);
  background-color: v(gray2);
  font-style: italic;
}

.edit {
  @include flex;

  &__sidetool {
    display: none;

    .button--box + .button--box {
      margin-top: d1-2($space);
    }
  }

  &__canvas {
    @include flex;
    width: 100%;
    height: 100%;
  }

  &__canvas img {
    width: 100%;
    max-height: 680px;
    object-fit: contain;
  }

  &__bottomtool {
    display: none;
    margin-top: x1-2($space);

    .button-container {
      @include flex;
      @include between;
    }

    .button--box + .button--box {
      margin-left: d1-2($space);
    }
  }
}

.panel--footer-xs {
  display: none;
}

@media (max-width: $md) {
  .panel--footer-xs {
    display: block;
    position: fixed;
    right: 0;
    bottom: 0;
    left: 0;
    padding: d1-2($space);
    background-color: v(white);
    border-radius: d6($space) d6($space) 0 0;
    box-shadow: 0px -4px 4px 0px rgba(0, 0, 0, 0.25);

    .button-container {
      @include flex;
      @include between;
    }

    .button + .button {
      margin-left: d3($space);
    }

    .button--brand {
      position: fixed;
      bottom: 35vh;
      right: 3vw;
      width: auto;
    }

    .button--preview {
      position: fixed;
      bottom: 25vh;
      right: 3vw;
      width: auto;
    }
  }
}

@include media(sm) {
  .article--tool {
    &__box,
    &__canvas canvas {
      aspect-ratio: 1 / 1;
    }
  }
}

@include media(md) {
  .article--tool {
    &__box {
      margin-bottom: 0;
      min-height: 600px;
      max-height: 600px;
      background-color: v(gray3);
      aspect-ratio: unset;

      .buttons-box {
        right: $space;
      }
    }

    &__canvas .preview-info {
      position: absolute;
      top: d3($space);
      left: d3($space);
      margin-bottom: 0;
      z-index: 10;
      color: v(white);
    }

    &__canvas canvas {
      aspect-ratio: 4 / 3;
    }

    .box {
      margin-bottom: d1-2($space);
      padding: d3($space) d1-2($space) d1-2($space);
      border: 2px solid v(black);
      border-radius: d6($space);
    }

    .preview--xs {
      display: none;
    }

    .preview--md {
      @include flex;
      @include center;
      @include middle;
      min-height: 235px;
      max-height: 235px;
    }
  }

  .upload--xs {
    display: none;
  }

  .upload--md {
    @include flex;
    @include column;
    @include center;
    @include middle;
  }

  .footer--upload {
    display: none;
  }

  .edit {
    &__canvas {
      min-height: 475px;
      background-color: v(gray3);
    }

    .edit__sidetool {
      @include flex;
      @include column;
      width: 50px;
      min-width: 50px;
      margin-right: x1-2($space);
    }

    .edit__bottomtool {
      @include flex;
      @include end;

      .button--finish {
        width: auto;
        min-width: 320px;
      }
    }
  }
}
